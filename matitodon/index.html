<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<!-- スマホ向け倍率 -->
	<meta name="viewport" content="width=device-width, initial-scale=1.0 ,user-scalable=no ,minimal-ui">
	<!-- iOS向け -->
	<meta name="apple-mobile-web-app-capable" content="yes">
	<!-- Android向け -->
	<meta name="mobile-web-app-capable" content="yes">
	<!-- アプリマニフェスト -->
<!--	<link rel="manifest" href="manifest.json">
	<link href="img/home_icon.png" rel="apple-touch-icon-precomposed">
-->

	<!-- leaflet.jsライブラリ -->
	<script src="../leaflet/leaflet.js"></script>
	<link rel="stylesheet" href="../leaflet/leaflet.css" />

	<!-- leaflet plugin kml.js -->
	<script src="../leaflet-plugins/layer/vector/KML.js"></script>

	<style>
		html, body, #map {height: 100%; width: 100%; margin: 0; padding: 0}
	</style>
  <title>まちトドン地図</title>
</head>
<body>
	<div id='map' class="sidebar-map"></div>
	<script>


	var off1t =new L.KML("img/off1t.kml", {async: false}).on("loaded", function(e) { map.fitBounds(e.target.getBounds()); });
	var off1w =new L.KML("img/off1w.kml", {async: false}).on("loaded", function(e) { map.fitBounds(e.target.getBounds()); });

	var off2t =new L.KML("img/off2t.kml", {async: false}).on("loaded", function(e) { map.fitBounds(e.target.getBounds()); });


		var pal = L.tileLayer('http://cyberjapandata.gsi.go.jp/xyz/pale/{z}/{x}/{y}.png',
		{ attribution: "<a href='http://portal.cyberjapan.jp/help/termsofuse.html' target='_blank'>国土地理院</a>"
			, minZoom:12
			, maxZoom:18
		});

		var ort = L.tileLayer('http://cyberjapandata.gsi.go.jp/xyz/pale/{z}/{x}/{y}.png',
		{ attribution: "<a href='http://portal.cyberjapan.jp/help/termsofuse.html' target='_blank'>国土地理院</a>"
			, minZoom:12
			, maxZoom:18
		});

		//OpenStreetMap org
		var osm = L.tileLayer('', {
			attribution: "<a href='http://www.openstreetmap.org/copyright' target='_blank'>© OpenStreetMap</a> 協力者."
		})


	var baseMaps = {
		  "地理院" : pal
		, "OSM" : osm
		, "写真" : ort
	};
	var trekMaps = {
		  "off1t" : off1t
		, "off1w" : off1w
		, "off2t" : off2t
	};

	var layersGroup = L.layerGroup([off1t,off1w,off2t]);
	var map = L.map('map', {layers: [pal,layersGroup] })

	var popup = L.popup();
	map.on('click', function(e) {
	  var lat = e.latlng.lat.toFixed(6);
	  var lon = e.latlng.lng.toFixed(6);
	  popup
	    .setLatLng(e.latlng)
	    .setContent("" + lat + " , " + lon)
	    .openOn(map);
	});

	L.control.layers(baseMaps,trekMaps).addTo(map);

	map.setView([35.36, 138.36],8);


</script>

<!--
<script>
window.addEventListener('load', function() {
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register("serviceWorker.js")
      .then(function(registration) {
        console.log("serviceWorker registed.");
      }).catch(function(error) {
        console.warn("serviceWorker error.", error);
      });
  }
});
</script>
-->

</body>
</html>
